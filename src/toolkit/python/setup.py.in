from setuptools import setup, Extension
from platform import machine
import os

namespace_packages = []

if machine() == 'x86_64':
    if not os.path.isdir('/usr/lib64'):
        namespace_packages=['otestpoint']
else:
    namespace_packages=['otestpoint']

setup(name='opentestpoint-toolkit-python',
      namespace_packages=namespace_packages,
      version='@VERSION@',
      description='Python OpenTestPoint Toolkit',
      long_description='Python OpenTestPoint Toolkit',
      author='Adjacent Link LLC',
      author_email='labs at adjacent link dot com',
      url="http://adjacentlink.com",
      packages=['otestpoint',
                'otestpoint.toolkit'],
      ext_modules=[Extension('otestpoint.toolkit.logger',
                             sources = ['src/logger.cc'],
                             extra_compile_args=['-std=c++11'],
                             include_dirs = ['@TOPDIR@/include'],
                             library_dirs = ['@TOPDIR@/src/toolkit/.libs'],
                             libraries = ['otestpoint-toolkit',
                                          'protobuf',
                                          'zmq',
                                          'uuid'])],
      license = 'BSD',
      )

