FROM fedora:33

RUN dnf -y update
RUN dnf clean all

RUN dnf -y install gcc-c++ autoconf automake libtool libxml2-devel protobuf-devel \
                   python3-protobuf libuuid-devel rpm-build python3-setuptools python3-devel  \
                   sqlite-devel zeromq-devel git make

WORKDIR /opt
RUN git clone https://github.com/adjacentlink/opentestpoint -b develop

WORKDIR opentestpoint
RUN ./autogen.sh
RUN ./configure
RUN make rpm
RUN dnf -y install $(find .rpmbuild/RPMS -name "*\.rpm")

RUN echo 'fedora33 complete'

